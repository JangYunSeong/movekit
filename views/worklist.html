<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="/style/worklist.css" rel="stylesheet" type="text/css" />
    <title>moveList</title>
</head>
<body>
    <div id = "wrapper">
        <div id = "title">일하기</div>
        <div id = "home" onClick = "goHome()">HOME</div>
        <div id = "contents">
            <div id = "content1" class = "list" onClick = "goWork(id)">
                <div class = "listFrame">
                    <div class ="textgroup">
                        <div class = "from">FROM</div>
                        <div class = "fromtext">대구광역시 북구 대학로 80 IT융복합공학관 B101</div>
                    </div>
                    <div class ="textgroup">
                        <div class = "to">TO</div>
                        <div class = "totext">대구광역시 북구 대학로 80 IT-4 101</div>
                    </div>
                    <div class ="textgroup">
                        <div class = "when">WHEN</div>
                        <div class = "whentext">2022.04.30. 15:00</div>
                    </div>
                </div>
            </div>
            <div id = "content2" class = "list" onClick = "goWork(id)">
                <div class = "listFrame">
                    <div class ="textgroup">
                        <div class = "from">FROM</div>
                        <div class = "fromtext">대구광역시 달서구 월서로 14 101/2005</div>
                    </div>
                    <div class ="textgroup">
                        <div class = "to">TO</div>
                        <div class = "totext">대구광역시 북구 대학로 80 IT융복합공학관 B101</div>
                    </div>
                    <div class ="textgroup">
                        <div class = "when">WHEN</div>
                        <div class = "whentext">2022.04.29. 11:00</div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</body>
<script>
    const request = new XMLHttpRequest();
        request.onreadystatechange = function(){
            if(request.status == 200){
                console.log(request.responceText);
            }
        }
    request.open('GET','/worklist',true);
    request.responseType='json';
    request.setRequestHeader('Content-Type','application/json');
    request.onload = ()=>{
        var data = request.response;
        for(var i=0; i<data.length; i++){
            console.log(data[i].name);
        }
    };
    request.send();
    const goWork=(id)=>{
        const from = document.getElementById(id).getElementsByClassName("fromtext")[0].innerHTML;
        const to = document.getElementById(id).getElementsByClassName("totext")[0].innerHTML;
        const when = document.getElementById(id).getElementsByClassName("whentext")[0].innerHTML;
        const userinfo = new Object();
        userinfo.curpos = from;
        userinfo.movpos = to;
        userinfo.date = when;
        const Tag = document.getElementById(id);
        localStorage.setItem("user-info",JSON.stringify(userinfo))
        location.href = "./workDetail.html";
    }
    const goHome=()=>{
        location.href = "./main.html";
    }
    
</script>
</html>